"""
 mbed CMSIS-DAP debugger
 Copyright (c) 2006-2013 ARM Limited

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
"""

from flash_kinetis import Flash_Kinetis

flash_algo = {
    'load_address' : 0x20000000,
    'instructions' : [
    0xE00ABE00, 0x062D780D, 0x24084068, 0xD3000040, 0x1E644058, 0x1C49D1FA, 0x2A001E52, 0x4770D1F2,
    0x483eb510, 0x6041493c, 0x6081493d, 0x22806801, 0x22204391, 0x60014311, 0x6901483a, 0x0f890589,
    0xd0162902, 0x4a382100, 0x444a2900, 0xd0087011, 0x22036901, 0x43910212, 0x69016101, 0x0f890589,
    0x4832d1fb, 0xf0004448, 0x2800f865, 0x2001d000, 0x2101bd10, 0x482ce7e7, 0x78004448, 0xd00d2800,
    0x69014828, 0x02122203, 0x31ff4391, 0x310231ff, 0x69016101, 0x0f890589, 0xd1fa2902, 0x47702000,
    0xb5104822, 0x44484922, 0xf8c9f000, 0xd1042800, 0x2100481e, 0xf0004448, 0xbd10fae3, 0x4c1bb570,
    0x444c4605, 0x4b1a4601, 0x68e24620, 0xf8fef000, 0xd1052800, 0x46292300, 0x68e24620, 0xfaddf000,
    0xb570bd70, 0x460b460c, 0x46014606, 0xb084480f, 0x44484615, 0xf961f000, 0xd10a2800, 0x90029001,
    0x480a2101, 0x462b9100, 0x46314622, 0xf0004448, 0xb004fb0b, 0x0000bd70, 0xd928c520, 0x4002a000,
    0x0000ffff, 0x40020000, 0x00000004, 0x00000008, 0x6b65666b, 0xd1012800, 0x47702004, 0x7a47b4f0,
    0x4efe49fd, 0x158b447e, 0x4afd148d, 0x68c92400, 0xd01a2f01, 0x290f0f09, 0x0049d02b, 0x02895a71,
    0x06362601, 0x60416006, 0x72012101, 0x60c102c9, 0x408b7b11, 0x7b516143, 0x61816104, 0x06c92109,
    0x62016245, 0x2000bcf0, 0x01094770, 0x290f0f09, 0x0049d00c, 0x02895a71, 0x60416004, 0x72012102,
    0x7b9160c5, 0x6143408b, 0xe7e57bd1, 0x05092101, 0x2101e7f2, 0xe7d30489, 0xd0022800, 0x20006101,
    0x20044770, 0x48df4770, 0x22306801, 0x60014311, 0x8f6ff3bf, 0x8f4ff3bf, 0x48db4770, 0x22016801,
    0x60014311, 0x8f6ff3bf, 0x8f4ff3bf, 0x48d64770, 0x22016801, 0x60014311, 0x8f6ff3bf, 0x8f4ff3bf,
    0x680148d0, 0x43112230, 0xf3bf6001, 0xf3bf8f6f, 0x47708f4f, 0x217048cd, 0x21807001, 0x78017001,
    0xd5fc0609, 0x06817800, 0x2067d501, 0x06c14770, 0x2068d501, 0x07c04770, 0x2069d0fc, 0x28004770,
    0x2004d101, 0xb5104770, 0x4ac04604, 0x605048c0, 0x428148c0, 0x206bd001, 0x2000e000, 0xd1072800,
    0xf7ff4620, 0x4603ffd7, 0xf7ff4620, 0x4618ffc0, 0x2800bd10, 0x2004d101, 0xb5704770, 0x22004614,
    0x60626022, 0x60e260a2, 0x61626122, 0x460561a2, 0x680061e2, 0x60261a0e, 0x606068e8, 0x68687a29,
    0xfc8ef000, 0x7a6960a0, 0x29012008, 0x60e0d008, 0x61212110, 0x61a06161, 0x61e02004, 0xbd702000,
    0x05c92101, 0x60211871, 0xe7f160e0, 0xb089b5ff, 0x460c4615, 0x9809466a, 0xffcbf7ff, 0x4621462a,
    0x98099b04, 0xfc47f000, 0xd1300007, 0x9e019c00, 0x1e6d1965, 0x46284631, 0xfc62f000, 0xd0022900,
    0x43701c40, 0x42ac1e45, 0x0221d81d, 0x0a092009, 0x18090600, 0x6041488d, 0x980c498e, 0xd0014288,
    0xe000206b, 0x28002000, 0x9809d111, 0xff72f7ff, 0x98094607, 0x28006900, 0x4780d000, 0xd1022f00,
    0x42ac19a4, 0x9809d9e1, 0xff51f7ff, 0xb00d4638, 0x2800bdf0, 0x2004d101, 0xb5104770, 0x4a7b4604,
    0x6050487d, 0x4281487b, 0x206bd001, 0x2000e000, 0xd1072800, 0xf7ff4620, 0x4603ff4d, 0xf7ff4620,
    0x4618ff36, 0x2800bd10, 0x2004d101, 0xb5104770, 0x4a6e4604, 0x60504871, 0x4281486e, 0x206bd001,
    0x2000e000, 0xd1072800, 0xf7ff4620, 0x4603ff33, 0xf7ff4620, 0x4618ff1c, 0x2a00bd10, 0x2004d101,
    0xb5ff4770, 0x4614b089, 0x460d461e, 0x9809466a, 0xff4ff7ff, 0x46294632, 0x98099b03, 0xfbcbf000,
    0xd12d0007, 0x2e009d00, 0xcc02d026, 0x60814857, 0x29049903, 0x2908d002, 0xe00ed007, 0x2103022a,
    0x06490a12, 0x60411851, 0xcc02e007, 0x022a60c1, 0x0a122107, 0x18510609, 0x98096041, 0xfefaf7ff,
    0x98094607, 0x28006900, 0x4780d000, 0xd1032f00, 0x19459803, 0xd1d81a36, 0xf7ff9809, 0x4638fed8,
    0xbdf0b00d, 0xd0012800, 0xd1012a00, 0x47702004, 0x4604b510, 0x0a010608, 0x18084841, 0x6048493b,
    0x60886810, 0x60c86850, 0xf7ff4620, 0x4603fed3, 0xf7ff4620, 0x4618febc, 0xb5ffbd10, 0x980db08b,
    0x2800460c, 0x466ad024, 0xf7ff980b, 0x4621fef2, 0x9a0e9b05, 0xf000980b, 0x9008fb6e, 0xd1182800,
    0x90099801, 0x9e00980e, 0xd07f2800, 0x42409809, 0x990a900a, 0x40084270, 0x25004240, 0xd10142b0,
    0x18409909, 0x1989990e, 0xd9044281, 0xe0031b84, 0xb00f2004, 0x9c0ebdf0, 0xd05d2c00, 0x02bf2701,
    0xd80042bc, 0x08a94627, 0x0089980d, 0x20091809, 0x06c0463a, 0xfb7af000, 0x02011970, 0x0a09200b,
    0x18090600, 0x60414811, 0x99054638, 0xfb58f000, 0x48140401, 0x480d1809, 0x980b6081, 0xfe7af7ff,
    0x980b9008, 0x28006900, 0x4780d000, 0x28009808, 0x4805d02e, 0xe0176801, 0x40026040, 0x00000adc,
    0x40023020, 0x40001400, 0xf0003034, 0x40023000, 0x44ffffff, 0x6b65666b, 0x49ffffff, 0x4bffffff,
    0x4300ffff, 0x0000ffff, 0x43112201, 0xf3bf6001, 0xf3bf8f6f, 0x49fe8f4f, 0x22306808, 0x60084310,
    0x8f6ff3bf, 0x8f4ff3bf, 0xb00f9808, 0xe00dbdf0, 0x19ed1be4, 0xd1a12c00, 0x980d08a9, 0x18080089,
    0x980e900d, 0x1b401976, 0xd182900e, 0xf7ff980b, 0xe7e9fe1e, 0xd0012800, 0xd1012a00, 0x47702004,
    0x4614b570, 0x4aeb0609, 0x4deb0a09, 0x60691889, 0xfe20f7ff, 0xd1032800, 0x602168a9, 0x606168e9,
    0x2800bd70, 0x2900d00e, 0x48e3d00c, 0x07827880, 0x2a020f92, 0x0980d008, 0xd0082802, 0x70082002,
    0x47702000, 0x47702004, 0x70082000, 0x2001e7f8, 0x2800e7f5, 0x2900d001, 0x2004d101, 0xb5704770,
    0x23004dd5, 0x079278aa, 0x2a020f92, 0x4ad3d026, 0x780c606a, 0x462278cb, 0x061b784c, 0x43220224,
    0x0424788c, 0x431a4322, 0x0a12ba12, 0x021278cb, 0x60aa431a, 0x79cb790c, 0x794c4622, 0x0224061b,
    0x798c4322, 0x042479c9, 0x431a4322, 0x0a12ba12, 0x430a0212, 0xf7ff60ea, 0x4603fdcd, 0xbd704618,
    0xd1012800, 0x47702004, 0x04094abd, 0xb5101889, 0x60514ab9, 0xfdbef7ff, 0xb5ffbd10, 0x4614b08b,
    0x460d461e, 0x980b466a, 0xfde3f7ff, 0x46294622, 0x980b9b05, 0xfa5ff000, 0xd1332800, 0x4629466a,
    0xf7ff980b, 0x9d00fdd6, 0x90089802, 0x42404269, 0x424f4001, 0xd10142af, 0x183f9808, 0xd0202c00,
    0x90090230, 0x42a61b7e, 0x4626d900, 0x99054630, 0xfa66f000, 0x2101022a, 0x06090a12, 0x499e1852,
    0x9a09604a, 0x43100400, 0x608830ff, 0xf7ff980b, 0x2800fd81, 0x9808d106, 0x19ad1ba4, 0x2c00183f,
    0x2000d1e0, 0xbdf0b00f, 0xd1012b00, 0x47702004, 0xb089b5ff, 0x461d4616, 0x466a460c, 0x98099f12,
    0xfd97f7ff, 0x46214632, 0x98099b07, 0xfa13f000, 0xd11d2800, 0x2e009c00, 0x498ad01a, 0x18470638,
    0x20010221, 0x06400a09, 0x48831809, 0x60876041, 0x60c16829, 0xf7ff9809, 0x2800fd4d, 0x9913d00a,
    0xd0002900, 0x9914600c, 0xd0012900, 0x600a2200, 0xbdf0b00d, 0x1a769907, 0x00890889, 0x9907194d,
    0x2e00190c, 0xb00dd1dc, 0x2800bdf0, 0x2004d101, 0x4a754770, 0x18890409, 0x4a6fb510, 0xf7ff6051,
    0xbd10fd29, 0xd1012b00, 0x47702004, 0xb099b5ff, 0x460c461d, 0x23084606, 0xf0009a1b, 0x2800f9cc,
    0x2e00d11f, 0x2700d012, 0x97129711, 0x68319713, 0x91116870, 0x29017a71, 0x2110d00a, 0x02899113,
    0xd2074281, 0xf0009913, 0xe005f9db, 0xe0042704, 0xe7f32140, 0x02802001, 0x46bc9012, 0xd0022f00,
    0xb01d4638, 0x981bbdf0, 0x20001823, 0x9a119912, 0x18524341, 0x46690087, 0x991351ca, 0x42811c40,
    0x2200d2f4, 0xd92c2900, 0xa9147a76, 0xd0072e01, 0xd21c2a08, 0x7f004848, 0x07c040d0, 0xe0100fc0,
    0xd2052a08, 0x79004849, 0x07c040d0, 0xe0080fc0, 0x38084610, 0xd2142808, 0x797f4f44, 0x07f840c7,
    0x54880fc0, 0x1c529813, 0xd8df4290, 0x4610e009, 0x28083808, 0x4f38d205, 0x40c77f7f, 0x0fc007f8,
    0x2000e7ef, 0x46014602, 0xd21a429c, 0x466f0086, 0x42a759bf, 0x466fd80c, 0x687619f6, 0xd90742a6,
    0x5c36ae14, 0x2e001c52, 0x1c49d100, 0x19349e12, 0x429c1c40, 0x2900d3ea, 0x4291d003, 0x2001d104,
    0x2000e003, 0xe0017028, 0x70282002, 0xb01d4660, 0x2b00bdf0, 0x2004d101, 0xb5ff4770, 0x461fb087,
    0x460c4616, 0x98072308, 0xf935f000, 0xd16c2800, 0x28009807, 0x2100d03f, 0x91019100, 0x68019102,
    0x69419100, 0x69809101, 0x20009002, 0x28009003, 0x9801d15b, 0x424019a6, 0x42724601, 0x40214010,
    0x9a011840, 0x42402500, 0xf0004611, 0x9005f939, 0xd24442b4, 0x7a409807, 0x98009004, 0x1a209901,
    0xf92ef000, 0x29019904, 0x2820d017, 0xe00fd221, 0x40001400, 0x4100ffff, 0x40023000, 0x45ffffff,
    0x4000ffff, 0x00ffffff, 0x4a00ffff, 0x40023020, 0x6b494986, 0x2004e013, 0x2808e7c8, 0x4984d202,
    0xe00c7909, 0x42819902, 0x4981d912, 0x38087949, 0x9902e005, 0xd90b4281, 0x6b09497c, 0x22013820,
    0x438a4082, 0x1c6dd000, 0x19049801, 0xd3c442b4, 0xd0042d00, 0x42859805, 0x2002d204, 0x2000e003,
    0xe0017038, 0x70382001, 0xb00b9803, 0x2800bdf0, 0x2a00d00d, 0x290ad00b, 0x000bd21f, 0x791b447b,
    0x449f18db, 0x0a080806, 0x12100e0c, 0x20041614, 0x68c04770, 0x6840e00e, 0x7a00e00c, 0x6800e00a,
    0x2001e008, 0x6940e006, 0x6980e004, 0x6a00e002, 0x6a40e000, 0x20006010, 0x206a4770, 0x23004770,
    0xd1012800, 0x47702004, 0x2906b410, 0xdc02d023, 0xd80d2905, 0x2909e01f, 0xdc04d01d, 0xd01a2907,
    0xd1052908, 0xb2d4e017, 0xd0052920, 0xd0092921, 0xbc10236a, 0x47704618, 0xd0012a00, 0xd1052a01,
    0xe7f67244, 0xd0042a00, 0xd0022a01, 0x2077bc10, 0x72844770, 0x2376e7ed, 0x2800e7eb, 0x7a40d011,
    0xd0102801, 0x680a4841, 0x680a61c2, 0x429a69c3, 0x684ad105, 0x68496182, 0x42816980, 0x2069d010,
    0x20044770, 0x483b4770, 0x7102780a, 0x7903780a, 0xd1f4429a, 0x7142784a, 0x79407849, 0xd1ee4281,
    0x47702000, 0xd00b2800, 0xd0092900, 0x28017a40, 0x482ed008, 0x600a69c2, 0x60486980, 0x47702000,
    0x47702004, 0x7902482b, 0x7940700a, 0xe7f57048, 0x6804b410, 0x23204928, 0x1c642210, 0x680cd00b,
    0x600c439c, 0x28006840, 0xd00e6808, 0x60084310, 0x2000bc10, 0x68404770, 0xd0032800, 0x43186808,
    0xe7f56008, 0x2078bc10, 0x43904770, 0xb410e7ef, 0x60012100, 0x49186041, 0x23206809, 0x42192210,
    0xd0024b16, 0x60436003, 0x4211e002, 0x6043d000, 0x2000bc10, 0x28004770, 0x2004d101, 0xb4104770,
    0x42191e5b, 0x421ad101, 0xbc10d002, 0x47702065, 0x428b6803, 0x6840d807, 0x18181889, 0xd3024288,
    0x2000bc10, 0xbc104770, 0x47702066, 0x40023000, 0x40023040, 0x40023020, 0x40001400, 0xffffffff,
    0x460bb530, 0x20004601, 0x24012220, 0x460de009, 0x429d40d5, 0x461dd305, 0x1b494095, 0x40954625,
    0x46151940, 0x2d001e52, 0xbd30dcf1, 0x430b4603, 0xd003079b, 0xc908e009, 0xc0081f12, 0xd2fa2a04,
    0x780be003, 0x1c407003, 0x1e521c49, 0x4770d2f9, 0x40023004, 0x4002301c, 0x40023018, 0x40023024,
    0x40023025, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000100, 0x00000400,
    0x00000000, 0x00000000, 0x00000000,
    ],

    'pc_init' : 0x20000021,
    'pc_unInit': 0x20000077,
    'pc_program_page': 0x200000E3,
    'pc_erase_sector': 0x200000BD,
    'pc_eraseAll' : 0x200000A1,

    'static_base' : 0x20000000 + 0x00000020 + 0x00000c24,
    'begin_stack' : 0x20000000 + 0x00000800,
    'begin_data' : 0x20000000 + 0x00000A00,
    'page_size' : 0x00000200,
    'analyzer_supported' : True,
    'analyzer_address' : 0x1ffff000,  # Analyzer 0x1ffff000..0x1ffff600
    'page_buffers' : [0x20003000, 0x20004000],   # Enable double buffering
    'min_program_length' : 8,
};

class Flash_k32w042s(Flash_Kinetis):
    def __init__(self, target):
        super(Flash_k32w042s, self).__init__(target, flash_algo)
